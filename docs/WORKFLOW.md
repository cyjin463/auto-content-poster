# 🔄 자동 포스팅 워크플로우

## 📋 전체 프로세스

### 1. 검색 단계

**Google Custom Search API 우선 사용**
- 하루 100건 무료 쿼리 제공
- Rate Limit 감지 시 자동 폴백

**Rate Limit 시 폴백 순서:**
1. Google Custom Search API (우선)
2. Groq Search API (Google Rate Limit 시)
3. DuckDuckGo (최종 폴백)

---

### 2. 콘텐츠 생성 단계

#### 2-1. 영문 콘텐츠 생성
- 검색 결과를 기반으로 **영문으로 먼저 생성**
- AI 관점에서 키워드 연결
- 형식: Introduction, Body (3-4 subheadings), Conclusion

#### 2-2. 콘텐츠 검증
- 형식 검증 (서론/본론/결론 구조)
- 언어 검증 (영문만 사용)
- 품질 점수 계산 (0-100)

#### 2-3. 검증-수정 반복
- 문제 발견 시 자동 수정
- 재검증 수행
- **최대 3회 반복**, 통과될 때까지

---

### 3. 영문 포스팅

- 검증 완료된 영문 콘텐츠를 Notion에 포스팅
- 데이터베이스에 저장

---

### 4. 한글 번역 및 포스팅

#### 4-1. 한글 번역
- 영문 콘텐츠를 자연스러운 한국어로 번역
- 마크다운 형식 유지
- AI 관점 유지

#### 4-2. 한글 포스팅 전 검증
- **형식 검증**: 서론/본론/결론 구조
- **언어 검증**: 
  - 한글 문서: 한글 + 영어(기술 용어)만 허용
  - 영어 문서: 영어만 허용
  - 일본어, 중국어(한자), 베트남어 등 절대 금지

#### 4-3. 검증 실패 시 수정
- 문제 발견 시 자동 수정 시도
- 재검증 수행
- 통과될 때까지 반복

#### 4-4. 한글 포스팅
- 검증 완료된 한글 콘텐츠를 Notion에 포스팅
- 데이터베이스에 저장

---

### 5. 키워드 변경

- 한글 + 영문 두 건의 포스팅이 완료되면
- 현재 키워드 비활성화
- 다음 키워드 활성화 (커리큘럼 순서)

---

### 6. 자기 학습 (Self-learning)

- 모든 절차 완료 후
- 이전 포스팅 최근 4건 읽기
- 작성한 글의 말투, 형식, 내용 분석
- 어색한 부분 발견 시 다음 포스팅에 반영

---

## ⏰ 자동 실행 스케줄

### 오전 7시 (KST)
- 주말(토/일) 제외
- 자동 포스팅 실행
- 한글 + 영문 각 1건 생성 및 포스팅

### 오전 7시 30분 (KST)
- 자동 배포 확인
- 오류 발견 시 자동 수정 및 재배포
- 포스팅 상태 점검

---

## ✅ 검증 규칙

### 형식 검증
- **서론**: 2-3개 문단 (각 문단 사이 빈 줄 필수)
- **본론**: 3-4개 소제목 (각 소제목 아래 빈 줄 필수)
- **결론**: 2-3개 문단 (각 문단 사이 빈 줄 필수)
- 마크다운 형식 준수

### 언어 검증

#### 한글 문서
- ✅ 한글: 기본 언어
- ✅ 영어: 기술 용어나 축약어 설명 시에만 (예: "AI(인공지능)")
- ❌ 일본어: 절대 금지 (データ, まだ 등)
- ❌ 중국어(한자): 절대 금지 (非常, 数据 등)
- ❌ 베트남어 등 기타 외국어: 절대 금지

#### 영어 문서
- ✅ 영어: 유일한 허용 언어
- ❌ 한글: 절대 금지
- ❌ 중국어, 일본어, 베트남어 등: 절대 금지

---

## 🔄 반복 검증 프로세스

```
콘텐츠 생성
    ↓
검증 (형식 + 언어)
    ↓
[문제 발견?]
    ↓ YES → 수정
    ↓      ↓
    ↓      재검증
    ↓      ↓
    ↓ [통과?]
    ↓      ↓ NO (최대 3회)
    ↓      ↓
    ↓ YES ←────┘
    ↓
포스팅
```

---

## 📊 품질 점수

각 검증 단계에서 품질 점수를 계산합니다:

- **SearchQuality**: 검색 결과 관련성 (0-100)
- **FactAccuracy**: 사실 정확성 (0-100)
- **ContentQuality**: 콘텐츠 품질 (0-100)

최종 결과에 모든 점수가 포함됩니다.

---

## 🎯 실행 순서 요약

1. **검색**: Google → Groq → DuckDuckGo
2. **영문 생성**: 영문으로 먼저 콘텐츠 생성
3. **검증**: 형식 및 언어 검증
4. **수정-재검증**: 통과될 때까지 반복 (최대 3회)
5. **영문 포스팅**: 검증 완료된 영문 콘텐츠 포스팅
6. **한글 번역**: 영문 → 한글 자연스러운 번역
7. **한글 검증**: 형식 및 언어 검증 (한글+영어만)
8. **수정-재검증**: 통과될 때까지 반복
9. **한글 포스팅**: 검증 완료된 한글 콘텐츠 포스팅
10. **키워드 변경**: 다음 키워드로 이동
11. **자기 학습**: 최근 4건 분석 및 개선점 도출
12. **자동 실행**: 매일 오전 7시 (주말 제외)
13. **배포 확인**: 매일 오전 7시 30분 (오류 시 재배포)

